(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,s){},104:function(e,t,s){},128:function(e,t,s){},129:function(e,t,s){},130:function(e,t,s){},131:function(e,t,s){},132:function(e,t,s){},133:function(e,t,s){},134:function(e,t,s){},135:function(e,t,s){},136:function(e,t,s){},137:function(e,t,s){},138:function(e,t,s){},139:function(e,t,s){},140:function(e,t,s){},141:function(e,t,s){},142:function(e,t,s){},143:function(e,t,s){},144:function(e,t,s){},145:function(e,t,s){},146:function(e,t,s){},147:function(e,t,s){},148:function(e,t,s){},149:function(e,t,s){},150:function(e,t,s){},151:function(e,t,s){},181:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(91),r=s.n(n),i=s(4),l=(s(103),s(194)),o=s(195),d=(s(104),s(10)),u=s(7),j=s(2),b=s.n(j),p=s(5),h=s(6),O=s.n(h),v=s(33),m=s(11),x=function(e,t){switch(t.TYPE){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return localStorage.setItem("user",JSON.stringify({_id:t.payload._id,email:t.payload.email})),{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGIN_OUT":return localStorage.removeItem("user"),{user:null,isFetching:!1,error:!1};case"FOLLOW":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{followings:[].concat(Object(v.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});case"UNSTAR":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{staredPosts:e.user.staredPosts.filter((function(e){return e!==t.payload}))})});case"STAR":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{staredPosts:[].concat(Object(v.a)(e.user.staredPosts),[t.payload])})});case"UPDATE":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),t.payload)})}},_=s(0),f={user:null,isFetching:!1,error:!1},g=Object(c.createContext)(f),N=function(e){var t=e.children,s=Object(c.useReducer)(x,f),a=Object(i.a)(s,2),n=a[0],r=a[1];return Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("user")){e.next=15;break}return e.prev=1,t=JSON.parse(localStorage.getItem("user")),r({TYPE:"LOGIN_START"}),e.next=6,O.a.get("/api/users?userId="+t._id);case 6:s=e.sent,c=s.data,r({TYPE:"LOGIN_SUCCESS",payload:c}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),r({TYPE:"LOGIN_FAILURE"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),[]),Object(_.jsx)(g.Provider,{value:{user:n.user,isFetching:n.isFetching,error:n.error,dispatch:r},children:t})};function y(){var e=Object(c.useContext)(g),t=e.user,s=e.dispatch,a=Object(c.useRef)(),n=Object(d.g)();return Object(_.jsxs)("div",{className:"topbar__container",children:[Object(_.jsx)("div",{className:"topbar__left",children:Object(_.jsx)(u.b,{to:"/",className:"topbar__logo",style:{textDecoration:"none"},children:"G Social"})}),Object(_.jsx)("div",{className:"topbar__center",children:Object(_.jsxs)("form",{className:"searchBar",onSubmit:function(e){e.preventDefault(),n.push("/search/"+a.current.value)},children:[Object(_.jsx)("button",{style:{border:"none",background:"none"},children:Object(_.jsx)(l.a,{className:"searchIcon"})}),Object(_.jsx)("input",{type:"text",placeholder:"Search for friend,Post or video",className:"searchInput",ref:a})]})}),Object(_.jsxs)("div",{className:"topbar__right",children:[t?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"topbar__links",children:[Object(_.jsx)(u.b,{to:"/conversation",className:"topbar__link",children:"Message"}),Object(_.jsx)(u.b,{to:"/",className:"topbar__link",children:"Timeline"})]}),Object(_.jsx)("div",{className:"topbar__icons",children:Object(_.jsx)(u.b,{to:"/conversation",children:Object(_.jsxs)("div",{className:"topbar__iconItem",children:[Object(_.jsx)(o.a,{}),Object(_.jsx)("div",{className:"topbar__iconBadge",children:"2"})]})})})]}):null,t?Object(_.jsx)("button",{className:"rightbar__editBtn",style:{backgroundColor:"rgb(0, 104, 255)",margin:"0"},onClick:function(){s({TYPE:"LOGIN_OUT"})},children:"Log Out"}):Object(_.jsx)("button",{className:"rightbar__editBtn",style:{backgroundColor:"rgb(0, 104, 255)",margin:"0"},onClick:function(){n.push("/login")},children:"Log In"}),t?Object(_.jsx)(u.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t.userAddress),children:Object(_.jsx)("img",{className:"topbar__photo",src:""!==(null===t||void 0===t?void 0:t.profilePicture)?null===t||void 0===t?void 0:t.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"your image"})}):null]})]})}s(128);var w=s(196),k=s(197),I=s(198),S=s(199),P=s(200),C=s(201),F=s(202),U=s(203),E=s(204);s(129);function T(e){var t=e.user;return Object(_.jsx)(u.b,{to:"/profile/".concat(t.userAddress),children:Object(_.jsxs)("li",{className:"sidebar__friend",children:[Object(_.jsx)("img",{src:t.profilePicture?t.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"friends photo",className:"sidebar__friendImg"}),Object(_.jsx)("span",{className:"sidebar__friendName",children:null===t||void 0===t?void 0:t.userName})]})})}function L(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),s=t[0],a=t[1],n=Object(c.useContext)(g).user,r=Object(c.useState)(!1),l=Object(i.a)(r,2),d=l[0],j=l[1];return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users/friends/".concat(null===n||void 0===n?void 0:n._id));case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[null===n||void 0===n?void 0:n._id,n]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:d?"sidebar__toggle":"sidebar__toggle-active sidebar__toggle",onClick:function(){j(!d)},children:d?Object(_.jsx)(w.a,{}):Object(_.jsx)(k.a,{})}),Object(_.jsx)("div",{className:"sidebar ".concat(d?"sidebar-active":""),children:Object(_.jsxs)("div",{className:"sidebar__wrapper",children:[Object(_.jsxs)("ul",{className:"sidebar__list",children:[Object(_.jsx)(u.b,{to:"/",children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(I.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Feed"})]})}),Object(_.jsx)(u.b,{to:"/popular",children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(S.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Popular"})]})}),Object(_.jsx)(u.b,{to:"/videos",children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(P.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Videos"})]})}),Object(_.jsx)(u.b,{to:"/images",children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(C.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Image"})]})}),Object(_.jsx)(u.b,{to:"/stared",children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(F.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Stared"})]})}),Object(_.jsx)(u.b,{to:"/friends/".concat((null===n||void 0===n?void 0:n._id)||""),children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(U.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Friends"})]})}),Object(_.jsx)(u.b,{to:"/followers/".concat((null===n||void 0===n?void 0:n._id)||""),children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(E.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Followers"})]})}),Object(_.jsx)(u.b,{to:"/conversation",children:Object(_.jsxs)("li",{className:"sidebar__listItem",children:[Object(_.jsx)(o.a,{className:"sidebar__icon"}),Object(_.jsx)("span",{className:"sidebar__listText",children:"Chat"})]})})]}),Object(_.jsx)("button",{className:"sidebar__button",children:"Show more"}),Object(_.jsx)("hr",{className:"sidebar__hr"}),Object(_.jsx)("ul",{className:"sidebar__friendList",children:null===s||void 0===s?void 0:s.map((function(e,t){return Object(_.jsx)(T,{user:e},t)}))})]})})]})}s(130);var R=s(206),A=s(207),W=s(208),G=s(205);s(131);function Y(e){var t=e.target;e.image;return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("a",{href:t,target:"_blank",className:"advertisement",children:Object(_.jsx)("img",{src:"https://cdn2.vectorstock.com/i/1000x1000/21/86/coffee-advertisement-realistic-composition-vector-20772186.jpg",alt:"advertisement",className:"rightbar__ad"})})})}s(132);function D(e){var t=e.user,s=Object(c.useState)(null),a=Object(i.a)(s,2),n=a[0],r=a[1];return Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users?userId="+t);case 3:s=e.sent,r(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Cannot get Online Friend");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("li",{style:{display:"flex",alignItems:"center"},children:[Object(_.jsxs)("div",{className:"rightbar__image-container",children:[Object(_.jsx)("img",{src:(null===n||void 0===n?void 0:n.profilePicture)?null===n||void 0===n?void 0:n.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"friend__photo",className:"rightbar__friendPhoto"}),Object(_.jsx)("span",{className:"rightbar__online"})]}),Object(_.jsx)(u.b,{to:"/profile/"+(null===n||void 0===n?void 0:n.userAddress),className:"rightbar__friendName",children:null===n||void 0===n?void 0:n.userName})]})})}function q(e){var t=e.profile,s=e.user,a=e.onlineUsers,n="https://g-social.herokuapp.com/images",r=Object(c.useContext)(g),l=r.user,d=r.dispatch,j=Object(c.useState)([]),h=Object(i.a)(j,2),v=h[0],m=h[1],x=Object(c.useState)(!!(null===l||void 0===l?void 0:l.followings.includes(null===s||void 0===s?void 0:s._id))),f=Object(i.a)(x,2),N=f[0],y=f[1];console.log(s),console.log(l);function w(e){var t=e.PF;return Object(_.jsxs)("div",{className:"rightbar__birthday",children:[Object(_.jsx)("img",{src:t+"/gift.png",alt:"Happy Birthday",className:"birthday__image"}),Object(_.jsxs)("span",{className:"birthday__text",children:[Object(_.jsx)("b",{children:"John Smith"}),Object(_.jsx)("b",{children:"and 3 others"})," has birthday today!"]})]})}return Object(_.jsx)("div",{className:t?"rightbar":"rightbar rightbar-home",style:t?{position:"initial",overflowX:"unset"}:null,children:Object(_.jsx)("div",{className:"rightbar__wrapper",children:t?function(){Object(c.useEffect)((function(){(function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users/friends/".concat(null===s||void 0===s?void 0:s._id));case 3:t=e.sent,m(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[null===s||void 0===s?void 0:s._id]),Object(c.useEffect)((function(){y(!!(null===l||void 0===l?void 0:l.followings.includes(null===s||void 0===s?void 0:s._id)))}),[l,s]);var e=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!N){e.next=7;break}return e.next=4,O.a.put("/api/users/".concat(s._id,"/unfollow"),{userId:l._id});case 4:d({TYPE:"UNFOLLOW",payload:s._id}),e.next=10;break;case 7:return e.next=9,O.a.put("/api/users/".concat(s._id,"/follow"),{userId:l._id});case 9:d({TYPE:"FOLLOW",payload:s._id});case 10:y(!N),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/conversations/",{senderId:null===l||void 0===l?void 0:l._id,receiverId:null===s||void 0===s?void 0:s._id});case 3:"Object Exists"===e.sent.data.type?alert("Conversation already exists"):alert("Chat room has been created successfully"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert("Sorry some error occurred cant create the chat room");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();function a(e){e.PF;var t=e.user;return Object(_.jsxs)("div",{className:"rightbar__info",children:[Object(_.jsxs)("div",{className:"rightbar__info-item",children:[Object(_.jsx)("span",{className:"rightbar__info-key",children:"City"}),Object(_.jsx)("span",{className:"rightbar__info-value",children:(null===t||void 0===t?void 0:t.city)?t.city:"none"})]}),Object(_.jsxs)("div",{className:"rightbar__info-item",children:[Object(_.jsx)("span",{className:"rightbar__info-key",children:"From"}),Object(_.jsx)("span",{className:"rightbar__info-value",children:(null===t||void 0===t?void 0:t.from)?t.from:"none"})]}),Object(_.jsxs)("div",{className:"rightbar__info-item",children:[Object(_.jsx)("span",{className:"rightbar__info-key",children:"Relationship"}),Object(_.jsx)("span",{className:"rightbar__info-value",children:(null===t||void 0===t?void 0:t.relationship)?t.relationship:"none"})]})]})}function r(e){var t=e.PF;return Object(_.jsx)("div",{className:"rightbar__followings",children:v.map((function(e){return Object(_.jsx)(u.b,{to:"/profile/".concat(e.userAddress),style:{textDecoration:"none"},children:Object(_.jsxs)("div",{className:"rightbar__following",children:[Object(_.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?e.profilePicture:t+"/user.png",alt:"friends photo",className:"rightbar__followingImg"}),Object(_.jsx)("span",{className:"rightbar__followingUserName",children:e.userName})]})})}))})}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"rightbar__bts",style:{display:"flex",alignItems:"center",justifyContent:"space-evenly"},children:[(null===s||void 0===s?void 0:s._id)!==(null===l||void 0===l?void 0:l._id)&&l?Object(_.jsxs)("button",{className:"rightbar__followBtn",onClick:e,children:[N?"unFollow":"Follow",N?Object(_.jsx)(R.a,{}):Object(_.jsx)(A.a,{})]}):null,(null===s||void 0===s?void 0:s._id)!==(null===l||void 0===l?void 0:l._id)&&s?null:Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(u.b,{to:"/profile/".concat(null===s||void 0===s?void 0:s._id,"/edit"),children:Object(_.jsxs)("button",{className:"rightbar__editBtn",children:["Edit",Object(_.jsx)(W.a,{})]})})}),(null===s||void 0===s?void 0:s._id)!==(null===l||void 0===l?void 0:l._id)&&s&&l?Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("button",{className:"rightbar__editBtn",onClick:t,children:["Chat",Object(_.jsx)(o.a,{})]})}):null]}),Object(_.jsxs)("div",{className:"rightbar__userInfo",children:[Object(_.jsx)("h4",{className:"rightbar__title",children:"User Information"}),Object(_.jsx)(a,{PF:n,user:s})]}),Object(_.jsxs)("div",{className:"rightbar__followings-container",children:[Object(_.jsx)("h4",{className:"rightbar__title",children:"User Friends"}),Object(_.jsx)(r,{PF:n})]}),Object(_.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly",color:"rgb(11, 83, 187)"},children:[Object(_.jsx)(u.b,{to:"/friends/"+s._id,children:"See all Friends"}),Object(_.jsx)(u.b,{to:"/followers/"+s._id,children:"See all Followers"})]})]})}():function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),s=t[0],r=t[1],o=Object(c.useState)([]),d=Object(i.a)(o,2),u=(d[0],d[1]);return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l){e.next=6;break}return e.next=4,O.a.get("/api/users/friends/"+(null===l||void 0===l?void 0:l._id));case 4:t=e.sent,r(t.data);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),alert("Failed to get friends");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(c.useEffect)((function(){a&&u(null===s||void 0===s?void 0:s.filter((function(e){return null===a||void 0===a?void 0:a.includes(e._id)})))}),[s,a]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(w,{PF:n}),Object(_.jsx)(Y,{target:"#",image:"/ad.png"}),Object(_.jsx)("h4",{className:"rightbar__title",children:"Online friends"}),Object(_.jsx)("ul",{className:"rightbar__friends",style:a?null:{justifyContent:"center",display:"flex",alignItems:"center"},children:l?Object(_.jsx)(_.Fragment,{children:a?null===a||void 0===a?void 0:a.map((function(e,t){return Object(_.jsx)(D,{user:e},t)})):Object(_.jsx)(G.a,{})}):Object(_.jsx)("h2",{style:{fontWeight:"lighter"},children:"Please Login"})})]})}()})})}s(133),s(134);var M=s(209),B=s(210),J=s(211),z=s(212),H=s(213),V=s(96),K=s(22),X=Object(V.a)({projectId:"socialmedia-8c50b",appId:"1:659710868243:web:701707ae22e534833738e6",storageBucket:"socialmedia-8c50b.appspot.com",locationId:"asia-south1",apiKey:"AIzaSyBKhyqduWabwS1rqkLz069YIYCkuJWsNW8",authDomain:"socialmedia-8c50b.firebaseapp.com",messagingSenderId:"659710868243",measurementId:"G-37467H01J1"}),Q=Object(K.c)(X),Z=function(e,t){if(console.log("uploading "),t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".jpeg")){var s=Object(K.d)(Q,"images/"+t);return Object(K.e)(s,e).then((function(){return Object(K.b)(Object(K.d)(Q,"images/"+t)).then((function(e){return console.log(e),e}))}))}if(t.endsWith(".mp4")){var c=Object(K.d)(Q,"videos/"+t);return Object(K.e)(c,e).then((function(){return Object(K.b)(Object(K.d)(Q,"videos/"+t)).then((function(e){return console.log(e),e}))}))}},$=function(e,t){console.log(e,t);var s=Object(K.d)(Q,t+"s/"+e);return console.log(s),Object(K.a)(s)};function ee(){var e,t,s,a="https://g-social.herokuapp.com/images",n=Object(c.useContext)(g).user,r=Object(c.useState)(),l=Object(i.a)(r,2),o=l[0],d=l[1],u=Object(c.useState)("Share"),j=Object(i.a)(u,2),h=j[0],v=j[1],m=Object(c.useRef)(),x=function(){var e=Object(p.a)(b.a.mark((function e(t){var s,c,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s={userId:n._id,description:m.current.value},e.prev=2,void 0==o){e.next=14;break}return c="".concat(Date.now()).concat(null===n||void 0===n?void 0:n.userAddress).concat(Math.floor(1e3*Math.random()),"_").concat(o.name),v("Uploading File"),e.next=8,Z(o,c);case 8:a=e.sent,s.src=a,r=c.endsWith(".jpg")||c.endsWith(".png")||c.endsWith(".jpeg")?"image":"video",console.log(r),s.srcType=r,s.name=c;case 14:return v("Creating Post"),e.next=17,O.a.post("/api/posts/",s);case 17:e.sent,v("Share"),window.location.reload(),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(2),console.log(e.t0),v("Share"),alert("Sorry can't uploaded the post");case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"share",children:Object(_.jsxs)("div",{className:"share__wrapper",children:[Object(_.jsx)(f,{PF:a}),Object(_.jsx)("hr",{className:"share__hr"}),(null===o||void 0===o||null===(e=o.type)||void 0===e?void 0:e.includes("image"))?Object(_.jsxs)("div",{className:"share__image-container",children:[Object(_.jsx)("img",{src:URL.createObjectURL(o),alt:"image",className:"share__image"}),Object(_.jsx)(M.a,{className:"share__cancel-image",onClick:function(){d(null)}})]}):null,!(null===o||void 0===o||null===(t=o.type)||void 0===t?void 0:t.includes("image"))&&(null===o||void 0===o||null===(s=o.type)||void 0===s?void 0:s.includes("video"))?Object(_.jsxs)("div",{className:"share__image-container",children:[Object(_.jsx)("video",{src:URL.createObjectURL(o),alt:"image",className:"share__image",controls:!0}),Object(_.jsx)(M.a,{className:"share__cancel-image",onClick:function(){d(null)}})]}):null,Object(_.jsx)(N,{PF:a})]})});function f(e){var t=e.PF;return Object(_.jsxs)("div",{className:"share__top",children:[Object(_.jsx)("img",{src:(null===n||void 0===n?void 0:n.profilePicture)?n.profilePicture:t+"/user.png",alt:"you profile picture",className:"share__profilePhoto"}),Object(_.jsx)("input",{type:"textarea",placeholder:"whats in your mind "+(null===n||void 0===n?void 0:n.userName)+"?",className:"share__input",ref:m})]})}function N(){return Object(_.jsxs)("form",{className:"share__bottom",onSubmit:x,children:[Object(_.jsxs)("div",{className:"share__options",children:[Object(_.jsxs)("label",{htmlFor:"file",className:"share__option",children:[Object(_.jsx)(B.a,{htmlColor:"red",className:"share__icon"}),Object(_.jsx)("span",{className:"share__optionText",children:"Photo or Video"}),Object(_.jsx)("input",{type:"file",id:"file",style:{display:"none"},accept:".png,.jpeg,.jpg,.mp4",onChange:function(e){return d(e.target.files[0])}})]}),Object(_.jsxs)("div",{className:"share__option",children:[Object(_.jsx)(J.a,{htmlColor:"blue",className:"share__icon"}),Object(_.jsx)("span",{className:"share__optionText",children:"Tag"})]}),Object(_.jsxs)("div",{className:"share__option",children:[Object(_.jsx)(z.a,{htmlColor:"green",className:"share__icon"}),Object(_.jsx)("span",{className:"share__optionText",children:"Location"})]}),Object(_.jsxs)("div",{className:"share__option",children:[Object(_.jsx)(H.a,{htmlColor:"goldenrod",className:"share__icon"}),Object(_.jsx)("span",{className:"share__optionText",children:"Feelings"})]})]}),Object(_.jsx)("button",{className:"share__button",style:{display:"flex",alignItems:"center"},children:"Share"!==h?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(G.a,{style:{width:"24px"}})," ",h]}):h})]})}}s(135);var te=s(217),se=s(36),ce=(s(136),s(214)),ae=s(215);function ne(e){var t=e.style,s=e.postId,a=e.stared,n=e.postUserId,r=e.postSrcName,l=e.postType,o=Object(c.useContext)(g),d=o.user,j=o.dispatch,h=Object(c.useState)(!1),v=Object(i.a)(h,2),m=v[0],x=v[1],f=Object(c.useState)(a),N=Object(i.a)(f,2),y=N[0],w=N[1];Object(c.useEffect)((function(){var e;w(null===d||void 0===d||null===(e=d.staredPosts)||void 0===e?void 0:e.includes(s))}));var k=function(){var e=Object(p.a)(b.a.mark((function e(){var t,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.put("/api/posts/star/"+s,{postId:s,userId:d._id});case 3:a=e.sent,(null===d||void 0===d||null===(t=d.staredPosts)||void 0===t?void 0:t.includes(s))?j({TYPE:"UNSTAR",payload:s}):j({TYPE:"STAR",payload:s}),w(null===d||void 0===d||null===(c=d.staredPosts)||void 0===c?void 0:c.includes(s)),alert(a.data.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),console.log(r),e.next=5,O.a.delete("/api/posts/"+s,{data:{userId:n}});case 5:$(r,l).then((function(){alert("deleted file"),x(!1),window.location.reload()})).catch((function(e){alert("error deleting file")})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"dropdown",style:t,children:Object(_.jsxs)("ul",{className:"dropdown__list",children:[Object(_.jsxs)("li",{className:"dropdown__item",onClick:function(){alert("Feature not Implemented")},children:[Object(_.jsx)("div",{className:"dropdown__icon",children:Object(_.jsx)(ce.a,{})}),Object(_.jsx)("div",{className:"dropdown__title",children:"Share"})]}),d?Object(_.jsxs)("li",{className:"dropdown__item",onClick:k,children:[Object(_.jsx)("div",{className:"dropdown__icon",children:Object(_.jsx)(F.a,{})}),Object(_.jsx)("div",{className:"dropdown__title",children:y?"Un Star":"Star"})]}):Object(_.jsx)(u.b,{to:"/login",className:"dropdown__item",children:Object(_.jsxs)("li",{className:"dropdown__item",children:[Object(_.jsx)("div",{className:"dropdown__icon",children:Object(_.jsx)(F.a,{})}),Object(_.jsx)("div",{className:"dropdown__title",children:"Login In to Star"})]})}),n&&n===(null===d||void 0===d?void 0:d._id)?Object(_.jsxs)("li",{className:"dropdown__item",onClick:I,children:[Object(_.jsx)("div",{className:"dropdown__icon",children:m?Object(_.jsx)(G.a,{}):Object(_.jsx)(ae.a,{})}),Object(_.jsx)("div",{className:"dropdown__title",children:"Delete"})]}):null]})})}var re=s(216);function ie(){return Object(_.jsx)("div",{className:"post__share",children:Object(_.jsx)(re.a,{})})}function le(e){var t,s,a,n,r=e.post,l=Object(c.useState)((null===r||void 0===r||null===(t=r.likes)||void 0===t?void 0:t.length)||0),o=Object(i.a)(l,2),d=o[0],j=o[1],h=Object(c.useState)(!1),v=Object(i.a)(h,2),m=v[0],x=v[1],f=Object(c.useState)({}),N=Object(i.a)(f,2),y=N[0],w=N[1],k=Object(c.useState)(!1),I=Object(i.a)(k,2),S=I[0],P=I[1],C=Object(c.useContext)(g).user;Object(c.useEffect)((function(){x(r.likes.includes(null===C||void 0===C?void 0:C._id))}),[C,r.likes]),Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users?userId=".concat(r.userId));case 3:t=e.sent,w(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[r.userId]);var F=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.put("/api/posts/".concat(r._id,"/like"),{userId:null===C||void 0===C?void 0:C._id});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:x(!0!==m),j((function(e){return!1===m?e+1:d-1}));case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:"post",children:[S?Object(_.jsx)(ne,{style:{opacity:"1",visibility:"visible"},postId:r._id,stared:null===y||void 0===y||null===(s=y.staredPosts)||void 0===s?void 0:s.includes(null===r||void 0===r?void 0:r._id),postUserId:r.userId,postSrcName:r.name,postType:r.srcType}):Object(_.jsx)(ne,{style:{opacity:"0",visibility:"hidden"},postId:r._id,stared:null===y||void 0===y||null===(a=y.staredPosts)||void 0===a?void 0:a.includes(null===r||void 0===r?void 0:r._id),postUserId:r.userId,postSrcName:r.name,postType:r.srcType}),Object(_.jsxs)("div",{className:"post__wrapper",children:[Object(_.jsxs)("div",{className:"post__top",children:[Object(_.jsxs)("div",{className:"post__topLeft",children:[Object(_.jsx)(u.b,{to:"/profile/".concat(null===y||void 0===y?void 0:y.userAddress),children:Object(_.jsx)("img",{src:(null===y||void 0===y?void 0:y.profilePicture)?null===y||void 0===y?void 0:y.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"your photo",className:"post__profilePhoto"})}),Object(_.jsx)("span",{className:"post__userName",children:null===y||void 0===y?void 0:y.userName}),Object(_.jsx)("span",{className:"post__date",children:Object(se.a)(r.createdAt)})]}),Object(_.jsx)("div",{className:"post__topRight",children:Object(_.jsx)(te.a,{className:"post__more",onClick:function(){P(!S)}})})]}),Object(_.jsx)(u.b,{to:"/post/"+r._id,style:{cursor:"pointer"},children:Object(_.jsxs)("div",{className:"post__center",children:[Object(_.jsx)("span",{className:"post__text",children:null===r||void 0===r?void 0:r.description}),"video"===(null===r||void 0===r?void 0:r.srcType)?Object(_.jsx)("video",{src:r.src,className:"post__image",controls:!0}):Object(_.jsx)("img",{className:"post__image",src:null===r||void 0===r?void 0:r.src,alt:""})]})}),Object(_.jsxs)("div",{className:"post__bottom",children:[Object(_.jsxs)("div",{className:"post__bottomLeft",children:[C?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("img",{className:"post__like",src:"/assets/like.png",alt:"like",onClick:F}),Object(_.jsx)("img",{className:"post__like",src:"/assets/heart.png",alt:"give a heart"})]}):null,Object(_.jsxs)("span",{className:"post__likeCounter",children:[d," likes"]})]}),Object(_.jsxs)("div",{className:"post__bottomRight",children:[Object(_.jsxs)("div",{className:"post__commentText",children:[null===r||void 0===r||null===(n=r.comments)||void 0===n?void 0:n.length," comments"]}),Object(_.jsx)(ie,{})]})]})]})]})}function oe(e){var t=e.username,s=e.stared,a=e.popular,n=e.profileEdit,r=e.videos,l=e.images,o=Object(c.useState)(),d=Object(i.a)(o,2),u=d[0],j=d[1],h=Object(c.useState)(!0),v=Object(i.a)(h,2),m=v[0],x=v[1],f=Object(c.useContext)(g).user;return Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,O.a.get("/api/posts/profile/".concat(t));case 4:e.t0=e.sent,e.next=38;break;case 7:if(!s){e.next=13;break}return e.next=10,O.a.get("/api/posts/stared/".concat(f._id));case 10:e.t1=e.sent,e.next=37;break;case 13:if(!a){e.next=19;break}return e.next=16,O.a.get("/api/posts/popular");case 16:e.t2=e.sent,e.next=36;break;case 19:if(!r){e.next=25;break}return e.next=22,O.a.get("/api/posts/videos");case 22:e.t3=e.sent,e.next=35;break;case 25:if(!l){e.next=31;break}return e.next=28,O.a.get("/api/posts/images");case 28:e.t4=e.sent,e.next=34;break;case 31:return e.next=33,O.a.get("/api/posts/timeline/".concat(f._id));case 33:e.t4=e.sent;case 34:e.t3=e.t4;case 35:e.t2=e.t3;case 36:e.t1=e.t2;case 37:e.t0=e.t1;case 38:c=e.t0,x(!1),j(c.data),e.next=46;break;case 43:e.prev=43,e.t5=e.catch(0),alert("Cant the get all posts");case 46:case"end":return e.stop()}}),e,null,[[0,43]])}))),[t,null===f||void 0===f?void 0:f._id,null===f||void 0===f?void 0:f.following,null===f||void 0===f?void 0:f.followers,null===f||void 0===f?void 0:f.staredPosts]),Object(_.jsx)("div",{className:"feed",children:Object(_.jsxs)("div",{className:"feed__wrapper",children:[t&&t!==(null===f||void 0===f?void 0:f.userName)&&n&&f?null:Object(_.jsx)(ee,{}),Object(_.jsx)("div",{className:"feed__posts-container",style:m?{display:"flex",alignItems:"center",justifyContent:"center"}:null,children:m?Object(_.jsx)(G.a,{}):Object(_.jsx)(_.Fragment,{children:u||0!=(null===u||void 0===u?void 0:u.length)?null===u||void 0===u?void 0:u.map((function(e,t){return e?Object(_.jsx)(le,{post:e},e._id):null})):null})})]})})}function de(e){var t=e.onlineUsers;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"home-container",children:[Object(_.jsx)(L,{}),Object(_.jsx)(oe,{}),Object(_.jsx)(q,{onlineUsers:t})]})]})}s(137);function ue(){var e="https://g-social.herokuapp.com/images",t=Object(c.useState)({}),s=Object(i.a)(t,2),a=s[0],n=s[1],r=Object(c.useState)(!0),l=Object(i.a)(r,2),o=l[0],j=l[1],h=Object(d.h)().userName;return Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users?userName=".concat(h));case 3:t=e.sent,n(t.data),j(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("User not found \ud83d\ude25");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[h]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"profile",style:{display:"flex",width:"100%"},children:[Object(_.jsx)(L,{}),Object(_.jsx)("div",{className:"profile__right",style:o?{display:"flex",alignItems:"center",justifyContent:"center"}:null,children:o?Object(_.jsx)(G.a,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"profile__right-top",children:[Object(_.jsxs)("div",{className:"profile__cover",children:[Object(_.jsx)("img",{src:(null===a||void 0===a?void 0:a.coverPicture)?a.coverPicture:e+"/post/3.jpeg",alt:"profile cover image",className:"profile__coverImage"}),Object(_.jsx)("img",{src:(null===a||void 0===a?void 0:a.profilePicture)?a.profilePicture:e+"/user.png",alt:"profile photo image",className:"profile__photoImage"})]}),Object(_.jsxs)("div",{className:"profile__info",children:[Object(_.jsx)("h4",{className:"profile__info-userName",children:null===a||void 0===a?void 0:a.userName}),Object(_.jsx)("span",{className:"profile__info-description",children:null===a||void 0===a?void 0:a.description}),Object(_.jsx)(u.b,{to:"/profile/"+a.userAddress,className:"profile__info-description",style:{fontSize:"11pcx",color:"rgb(0, 110, 255)"},children:null===a||void 0===a?void 0:a.userAddress})]})]}),Object(_.jsxs)("div",{className:"profile__right-bottom",children:[Object(_.jsx)(oe,{username:h}),Object(_.jsx)(q,{user:a!={}||a?a:null,profile:!0})]})]})})]})]})}var je=function(){var e=Object(p.a)(b.a.mark((function e(t,s){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({TYPE:"LOGIN_START"}),e.prev=1,e.next=4,O.a.post("/api/auth/login",t);case 4:c=e.sent,s({TYPE:"LOGIN_SUCCESS",payload:c.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),s({TYPE:"LOGIN_FAILURE",payload:e.t0}),alert("Login Failed");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}();s(138);function be(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useContext)(g),a=s.isFetching,n=(s.error,s.dispatch),r=(s.user,Object(d.g)()),i=function(){var s=Object(p.a)(b.a.mark((function s(c){return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c.preventDefault(),s.next=3,je({email:e.current.value,password:t.current.value},n);case 3:r.push("/");case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"login",children:Object(_.jsxs)("div",{className:"login__wrapper",children:[Object(_.jsxs)("div",{className:"login__right",children:[Object(_.jsx)("h1",{className:"login__logo",children:"Govi Social"}),Object(_.jsx)("span",{className:"login__description",children:"Connect with friends and the world around you on Govi social."})]}),Object(_.jsx)("div",{className:"login__left",children:Object(_.jsxs)("form",{className:"login__box",onSubmit:i,children:[Object(_.jsx)("input",{type:"email",className:"login__input",required:!0,placeholder:"Enter your Email",ref:e}),Object(_.jsx)("input",{type:"password",className:"login__input",required:!0,minLength:"6",maxLength:"30",placeholder:"Enter your Password",ref:t}),Object(_.jsx)("button",{className:"login__button",disabled:a,children:1==a?Object(_.jsx)(G.a,{color:"white",size:"25px"}):"Log In"}),Object(_.jsx)("span",{className:"login__forgotPassword",children:"Forgot Password"}),Object(_.jsx)(u.b,{to:"/register",className:"login__register",disabled:a,children:1==a?Object(_.jsx)(G.a,{color:"white",size:"25px"}):"Create a new account"})]})})]})})}var pe=s(8);s(139);function he(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(d.g)(),r=function(){var c=Object(p.a)(b.a.mark((function c(r){var i;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r.preventDefault(),a.current.value===s.current.value){c.next=5;break}return c.abrupt("return",alert("Password don't match"));case 5:return i=Object(pe.a)({userName:e.current.value,password:s,email:t.current.value},"password",s.current.value),c.next=8,O.a.post("/api/auth/register",i).then((function(e){"ok"==e.statusText?alert("Register Successful"):alert(e.data.message),console.log(e)})).catch((function(e){console.log(e)}));case 8:c.sent,n.push("/login");case 10:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"login",children:Object(_.jsxs)("div",{className:"login__wrapper",children:[Object(_.jsxs)("div",{className:"login__right",children:[Object(_.jsx)("h1",{className:"login__logo",children:"Govi Social"}),Object(_.jsx)("span",{className:"login__description",children:"Connect with friends and the world around you on Govi social."})]}),Object(_.jsx)("form",{className:"login__left",onSubmit:r,children:Object(_.jsxs)("div",{className:"login__box",children:[Object(_.jsx)("input",{type:"text",className:"login__input",required:!0,placeholder:"Enter your UserName",ref:e}),Object(_.jsx)("input",{type:"email",className:"login__input",required:!0,placeholder:"Enter your Email",ref:t}),Object(_.jsx)("input",{type:"password",className:"login__input",required:!0,placeholder:"Enter your Password",ref:s,minLength:"6",maxLength:"30"}),Object(_.jsx)("input",{type:"password",className:"login__input",required:!0,placeholder:"Confirm your Password",ref:a,minLength:"6",maxLength:"30"}),Object(_.jsx)("button",{className:"login__button",children:"Sign Up"}),Object(_.jsx)(u.b,{style:{textDecoration:"none"},to:"/login",children:Object(_.jsx)("button",{className:"login__register",children:"Log Into Account"})})]})})]})})}s(140),s(141);function Oe(e){var t,s=e.comment,a=(Object(c.useContext)(g).user,Object(c.useState)((null===s||void 0===s||null===(t=s.likes)||void 0===t?void 0:t.length)||0)),n=Object(i.a)(a,2),r=(n[0],n[1],Object(c.useState)(null)),l=Object(i.a)(r,2),o=l[0],d=l[1];return Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users?userId=".concat(s.userId));case 3:t=e.sent,d(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[s.userId]),Object(_.jsx)("div",{className:"comment",children:Object(_.jsxs)("div",{className:"comment__wrapper",children:[Object(_.jsxs)("div",{className:"comment__top",children:[Object(_.jsx)(u.b,{to:"/profile/".concat(null===o||void 0===o?void 0:o.userAddress),children:Object(_.jsx)("img",{src:(null===o||void 0===o?void 0:o.profilePicture)?o.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"your photo",className:"comment__profilePhoto"})}),Object(_.jsx)("span",{className:"comment__userName",children:null===o||void 0===o?void 0:o.userName}),Object(_.jsx)("span",{className:"comment__date",children:Object(se.a)(null===s||void 0===s?void 0:s.createdAt)})]}),Object(_.jsx)("div",{className:"comment__center",children:Object(_.jsx)("span",{className:"comment__text",children:s.description})}),Object(_.jsxs)("div",{className:"comment__bottom",children:[Object(_.jsx)("div",{className:"comment__bottomLeft"}),Object(_.jsx)("div",{className:"comment__bottomRight"})]})]})})}function ve(e){var t,s,a,n,r=e.onlineUsers,l=Object(d.h)().postId,o=Object(c.useState)(!0),j=Object(i.a)(o,2),h=j[0],v=j[1],m=Object(c.useState)(),x=Object(i.a)(m,2),f=x[0],N=x[1],w=Object(c.useState)(),k=Object(i.a)(w,2),I=k[0],S=k[1],P=Object(c.useContext)(g).user,C="https://g-social.herokuapp.com/images",F=Object(c.useState)(!1),U=Object(i.a)(F,2),E=U[0],T=U[1],R=Object(c.useState)(0),A=Object(i.a)(R,2),W=A[0],Y=A[1],D=Object(c.useState)(!1),M=Object(i.a)(D,2),B=M[0],J=M[1],z=Object(c.useState)(!1),H=Object(i.a)(z,2),V=H[0],K=H[1],X=Object(c.useRef)();Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/posts/".concat(l));case 2:t=e.sent,N(t.data),Y(t.data.likes.length),J(t.data.likes.includes()),v(!1);case 7:case"end":return e.stop()}}),e)}))),[l,V]),Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===f||void 0===f?void 0:f.userId)){e.next=6;break}return e.next=3,O.a.get("/api/users?userId=".concat(null===f||void 0===f?void 0:f.userId));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:t=e.t0,S(null===t||void 0===t?void 0:t.data);case 9:case"end":return e.stop()}}),e)}))),[null===f||void 0===f?void 0:f.userId]);var Q=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.put("/api/posts/".concat(f._id,"/like"),{userId:P._id});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:J(!0!==B),Y((function(e){return!1===B?e+1:W-1}));case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post("/api/posts/comments",{description:X.current.value,postId:null===f||void 0===f?void 0:f._id,userId:P._id});case 4:K(!V),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"postInfo",style:{display:"flex",width:"100%"},children:[Object(_.jsx)(L,{}),Object(_.jsx)("div",{className:"postInfo__center",style:h?{display:"flex",alignItems:"center",justifyContent:"center"}:null,children:h?Object(_.jsx)(G.a,{}):Object(_.jsxs)("div",{className:"post",children:[E?Object(_.jsx)(ne,{style:{opacity:"1",visibility:"visible",right:"-125"},postId:null===f||void 0===f?void 0:f._id,stared:null===I||void 0===I||null===(t=I.staredPosts)||void 0===t?void 0:t.includes(null===f||void 0===f?void 0:f._id)}):Object(_.jsx)(ne,{style:{opacity:"0",visibility:"hidden",right:"-125"},postId:null===f||void 0===f?void 0:f._id,stared:null===I||void 0===I||null===(s=I.staredPosts)||void 0===s?void 0:s.includes(null===f||void 0===f?void 0:f._id)}),Object(_.jsxs)("div",{className:"post__wrapper",children:[Object(_.jsxs)("div",{className:"post__top",children:[Object(_.jsxs)("div",{className:"post__topLeft",children:[Object(_.jsx)(u.b,{to:"/profile/".concat(null===I||void 0===I?void 0:I.userAddress),children:Object(_.jsx)("img",{src:""!==(null===I||void 0===I?void 0:I.profilePicture)||(null===I||void 0===I?void 0:I.profilePicture)?null===I||void 0===I?void 0:I.profilePicture:C+"/user.png",alt:"your photo",className:"post__profilePhoto"})}),Object(_.jsx)("span",{className:"post__userName",children:null===I||void 0===I?void 0:I.userName}),Object(_.jsx)("span",{className:"post__date",children:Object(se.a)(null===f||void 0===f?void 0:f.createdAt)})]}),Object(_.jsx)("div",{className:"post__topRight",children:Object(_.jsx)(te.a,{className:"post__more",onClick:function(){T(!E)}})})]}),Object(_.jsxs)("div",{className:"post__center",children:[Object(_.jsx)("span",{className:"post__text",children:null===f||void 0===f?void 0:f.description}),"video"===(null===f||void 0===f?void 0:f.srcType)?Object(_.jsx)("video",{src:f.src,className:"post__image",controls:!0}):Object(_.jsx)("img",{className:"post__image",src:null===f||void 0===f?void 0:f.src,alt:""})]}),Object(_.jsxs)("div",{className:"post__bottom",children:[Object(_.jsxs)("div",{className:"post__bottomLeft",children:[P?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("img",{className:"post__like",src:"/assets/like.png",alt:"like",onClick:Q}),Object(_.jsx)("img",{className:"post__like",src:"/assets/heart.png",alt:"give a heart"})]}):null,Object(_.jsxs)("span",{className:"post__likeCounter",children:[W," likes"]})]}),Object(_.jsxs)("div",{className:"post__bottomRight",children:[Object(_.jsxs)("div",{className:"post__commentText",children:[null===f||void 0===f||null===(a=f.comments)||void 0===a?void 0:a.length," comments"]}),Object(_.jsx)("div",{className:"post__share",children:Object(_.jsx)(ie,{})})]})]}),P?Object(_.jsx)("div",{className:"share",children:Object(_.jsx)("div",{className:"share__wrapper",children:Object(_.jsxs)("form",{className:"share__top",onSubmit:Z,children:[Object(_.jsx)("img",{src:""!==(null===I||void 0===I?void 0:I.profilePicture)?null===I||void 0===I?void 0:I.profilePicture:C+"/user.png",alt:"you profile picture",className:"share__profilePhoto"}),Object(_.jsx)("input",{type:"textarea",placeholder:"What you Think "+(null===P||void 0===P?void 0:P.userName)+"?",className:"share__input",ref:X}),Object(_.jsx)("button",{className:"share__comment_btn",children:"Submit"})]})})}):Object(_.jsx)("h1",{style:{margin:"10px",marginTop:"38px",fontWeight:"lighter"},children:"Please Log In to add Comment or Like"}),Object(_.jsx)("div",{className:"postInfo__comment-container",children:null===f||void 0===f||null===(n=f.comments)||void 0===n?void 0:n.map((function(e){return Object(_.jsx)(Oe,{comment:e})}))})]})]})}),Object(_.jsx)(q,{onlineUsers:r})]})]})}s(142),s(143);function me(){var e=Object(d.h)().query,t=Object(c.useContext)(g).user,s=Object(c.useState)([]),a=Object(i.a)(s,2),n=a[0],r=a[1],l=Object(c.useState)([]),o=Object(i.a)(l,2),j=o[0],h=o[1];return Object(c.useEffect)(Object(p.a)(b.a.mark((function s(){var c;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.a.get("/api/users/query?q="+e||!1);case 3:c=s.sent,r(c.data.filter((function(e){return e._id!==(null===t||void 0===t?void 0:t._id)}))),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])}))),[e]),Object(c.useEffect)(Object(p.a)(b.a.mark((function t(){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("/api/posts/query?q="+e);case 3:s=t.sent,h(s.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e]),Object(_.jsxs)("div",{className:"search__result",children:[Object(_.jsxs)("div",{className:"search__ResultsFound",children:[null===n||void 0===n?void 0:n.length," users found"]}),Object(_.jsx)("div",{className:"search__userResults",children:(null===n||void 0===n?void 0:n.length)>0?n.map((function(e){return Object(_.jsxs)(u.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e.userAddress),className:"result__user",children:[Object(_.jsx)("img",{src:""!==e.profilePicture?e.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"user image",className:"result__userImage"}),Object(_.jsx)("span",{className:"result__userName",children:e.userName})]})})):null}),Object(_.jsxs)("div",{className:"search__ResultsFound",children:[null===j||void 0===j?void 0:j.length," posts found"]}),Object(_.jsx)("div",{className:"search__postResults",children:(null===j||void 0===j?void 0:j.length)>0?j.map((function(e){return Object(_.jsx)(le,{post:e})})):null}),"Result"]})}function xe(e){var t=e.onlineUsers;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsx)("div",{className:"search",children:Object(_.jsxs)("div",{className:"search__wrapper",children:[Object(_.jsx)("div",{className:"search__left",children:Object(_.jsx)(L,{})}),Object(_.jsx)("div",{className:"search__center",children:Object(_.jsx)(me,{})}),Object(_.jsx)("div",{className:"search__right",children:Object(_.jsx)(q,{onlineUsers:t})})]})})]})}s(144);function _e(e){var t=e.onlineUsers;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"home-container",children:[Object(_.jsx)(L,{}),Object(_.jsx)(oe,{stared:!0}),Object(_.jsx)(q,{onlineUsers:t})]})]})}function fe(e){var t=e.onlineUsers;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"home-container",children:[Object(_.jsx)(L,{}),Object(_.jsx)(oe,{videos:!0}),Object(_.jsx)(q,{onlineUsers:t})]})]})}function ge(e){var t=e.onlineUsers;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"home-container",children:[Object(_.jsx)(L,{}),Object(_.jsx)(oe,{images:!0}),Object(_.jsx)(q,{onlineUsers:t})]})]})}function Ne(e){var t=e.onlineUsers;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"home-container",children:[Object(_.jsx)(L,{}),Object(_.jsx)(oe,{popular:!0}),Object(_.jsx)(q,{onlineUsers:t})]})]})}s(145);function ye(e){e.friend;var t=e.onlineUsers,s=Object(c.useState)(null),a=Object(i.a)(s,2),n=a[0],r=a[1],l=Object(d.h)().userId;return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users/followers/".concat(l));case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"home-container",children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:"feed",children:[Object(_.jsx)("h1",{className:"followers__Title",children:"Followers"}),Object(_.jsx)("div",{className:"followers__users",children:null===n||void 0===n?void 0:n.map((function(e){return Object(_.jsxs)(u.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e.userAddress),className:"result__user",children:[Object(_.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?e.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"user image",className:"result__userImage"}),Object(_.jsx)("span",{className:"result__userName",children:e.userName})]})}))})]}),Object(_.jsx)(q,{onlineUsers:t})]})]})}s(146);function we(e){e.friend;var t=e.onlineUsers,s=Object(c.useState)(null),a=Object(i.a)(s,2),n=a[0],r=a[1],l=Object(d.h)().userId;return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users/friends/".concat(l));case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"home-container",children:[Object(_.jsx)(L,{}),Object(_.jsxs)("div",{className:"feed",children:[Object(_.jsx)("h1",{className:"followers__Title",children:"Friends"}),Object(_.jsx)("div",{className:"followers__users",children:null===n||void 0===n?void 0:n.map((function(e){return Object(_.jsxs)(u.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e.userAddress),className:"result__user",children:[Object(_.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?e.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"user image",className:"result__userImage"}),Object(_.jsx)("span",{className:"result__userName",children:e.userName})]})}))})]}),Object(_.jsx)(q,{onlineUsers:t})]})]})}s(147);function ke(){var e="https://g-social.herokuapp.com/images",t=Object(d.g)(),s=Object(c.useContext)(g),a=s.dispatch,n=s.user,r=Object(c.useState)(null),l=Object(i.a)(r,2),o=l[0],u=l[1],j=Object(c.useState)(null),h=Object(i.a)(j,2),v=h[0],x=h[1],f=Object(c.useState)(null),N=Object(i.a)(f,2),w=N[0],k=N[1],I=Object(c.useState)(null),S=Object(i.a)(I,2),P=S[0],C=S[1],F=Object(c.useState)(null),U=Object(i.a)(F,2),E=U[0],T=U[1],R=Object(c.useState)("single"),A=Object(i.a)(R,2),W=A[0],Y=A[1],D=Object(c.useState)("Update"),q=Object(i.a)(D,2),M=q[0],B=q[1],J=Object(c.useState)(null),z=Object(i.a)(J,2),H=z[0],V=z[1],K=Object(c.useState)(null),X=Object(i.a)(K,2),Q=X[0],$=X[1],ee=Object(d.h)().userId;Object(c.useEffect)(Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users?userId=".concat(ee));case 3:t=e.sent,V(null===o||void 0===o?void 0:o.from),u(t.data),$(null===o||void 0===o?void 0:o.city),C(null===o||void 0===o?void 0:o.userName),Y(null===o||void 0===o?void 0:o.relationship),T(null===o||void 0===o?void 0:o.description),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("User not found \ud83d\ude25");case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[ee,n]);var te=function(){var e=Object(p.a)(b.a.mark((function e(){var s,c,r,i,l,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={},W&&(s.relationship=W),P&&(s.userName=P),Q&&(s.city=Q),H&&(s.from=H),E&&(s.description=E),void 0==v&&null==v){e.next=13;break}return c="".concat(Date.now(),"_SocialMedia_Id_").concat(Math.floor(1e3*Math.random()),"_").concat(v.name),B("Uploading Profile Picture"),e.next=11,Z(v,c);case 11:r=e.sent,s.profilePicture=r;case 13:if(void 0==w&&null==w){e.next=19;break}return i="".concat(Date.now(),"_SocialMedia_Id_").concat(Math.floor(1e3*Math.random()),"_").concat(w.name),e.next=17,Z(w,i);case 17:l=e.sent,s.coverPicture=l;case 19:return e.prev=19,B("Updating..."),e.next=23,O.a.put("/api/users/"+(null===o||void 0===o?void 0:o._id),Object(m.a)(Object(m.a)({},s),{},{userId:null===n||void 0===n?void 0:n._id}));case 23:d=e.sent,a({TYPE:"UPDATE",payload:s}),alert(d.data.message),t.push("/"),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(19),console.log(e.t0),alert("Update profile failed \ud83d\ude22");case 33:case"end":return e.stop()}}),e,null,[[19,29]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"profile",style:{display:"flex",width:"100%"},children:[Object(_.jsx)(L,{}),(null===o||void 0===o?void 0:o._id)===n._id?Object(_.jsxs)("div",{className:"profile__right",children:[Object(_.jsxs)("div",{className:"profile__right-top",children:[Object(_.jsxs)("div",{className:"profile__cover",children:[Object(_.jsx)("img",{src:w?URL.createObjectURL(w):e+"/post/3.jpeg",alt:"profile cover image",className:"profile__coverImage"}),Object(_.jsx)("img",{src:v?URL.createObjectURL(v):e+"/user.png",alt:"profile photo image",className:"profile__photoImage"})]}),Object(_.jsxs)("div",{className:"profile__info",children:[Object(_.jsx)("h4",{className:"profile__info-userName",children:Object(_.jsx)("input",{type:"text",style:{height:"2rem",fontSize:"1.8rem",margin:"1rem"},placeholder:"Enter your Name",value:P,onChange:function(e){C(e.target.value)}})}),Object(_.jsx)("span",{className:"profile__info-description",children:Object(_.jsx)("input",{type:"text",placeholder:"Enter your description",value:E,onChange:function(e){T(e.target.value)}})})]})]}),Object(_.jsxs)("div",{className:"profile__right-bottom",children:[Object(_.jsxs)("div",{style:{margin:"10px"},children:[Object(_.jsx)("button",{className:"choosepicbtn",children:Object(_.jsx)("label",{htmlFor:"profilePic",style:{cursor:"pointer"},children:"Chose your profile picture"})}),Object(_.jsx)("input",{type:"file",name:"profilePic",id:"profilePic",style:{display:"none"},onChange:function(e){x(e.target.files[0])},accept:".png,.jpeg,.jpg"})]}),Object(_.jsxs)("div",{style:{margin:"10px"},children:[Object(_.jsx)("button",{className:"choosepicbtn",children:Object(_.jsx)("label",{htmlFor:"coverPic",style:{cursor:"pointer"},children:"Chose your Cover picture"})}),Object(_.jsx)("input",{type:"file",name:"coverPic",id:"coverPic",style:{display:"none"},onChange:function(e){k(e.target.files[0])},accept:".png,.jpeg,.jpg"})]})]}),Object(_.jsxs)("div",{className:"rightbar__info",children:[Object(_.jsxs)("div",{className:"rightbar__info-item",children:[Object(_.jsx)("span",{className:"rightbar__info-key",children:"City"}),Object(_.jsx)("input",{className:"rightbar__info-value",type:"text",value:Q,onChange:function(e){$(e.target.value)}})]}),Object(_.jsxs)("div",{className:"rightbar__info-item",children:[Object(_.jsx)("span",{className:"rightbar__info-key",children:"From"}),Object(_.jsx)("input",{className:"rightbar__info-value",type:"text",value:H,onChange:function(e){V(e.target.value)}})]}),Object(_.jsxs)("div",{className:"rightbar__info-item",children:[Object(_.jsx)("span",{className:"rightbar__info-key",children:"Relationship"}),Object(_.jsxs)("select",{className:"rightbar__info-value",onChange:function(e){Y(e.target.value)},children:[Object(_.jsx)("option",{value:"single",children:"Single"}),Object(_.jsx)("option",{value:"married",children:"Married"})]})]})]}),Object(_.jsxs)("div",{className:"btn-group",children:[Object(_.jsx)("button",{onClick:function(){t.push("/")},className:"choosepicbtn",children:"Cancel"}),Object(_.jsx)("button",{onClick:te,className:"choosepicbtn",children:"Update"!==M?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(G.a,{}),M]}):M})]})]}):Object(_.jsx)("h1",{children:"You can Only Edit Your Profile"})]})]})}s(148);function Ie(e){var t=e.conversation,s=e.currentUser,a=Object(c.useState)(null),n=Object(i.a)(a,2),r=n[0],l=n[1];return Object(c.useEffect)((function(){var e=t.members.find((function(e){return e!==(null===s||void 0===s?void 0:s._id)}));(function(){var t=Object(p.a)(b.a.mark((function t(){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("/api/users?userId=".concat(e));case 3:s=t.sent,l(s.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),alert("Could not get user");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[s,t]),Object(_.jsxs)("div",{className:"conversations",children:[Object(_.jsx)(u.b,{to:"/profile/".concat(null===r||void 0===r?void 0:r.userAddress),children:Object(_.jsx)("img",{src:(null===r||void 0===r?void 0:r.profilePicture)?r.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"",className:"conversations__image"})}),Object(_.jsx)("span",{className:"conversations__name",children:null===r||void 0===r?void 0:r.userName})]})}s(149);function Se(e){var t=e.own,s=e.message;return Object(_.jsxs)("div",{className:t?"message own":"message",children:[Object(_.jsxs)("div",{className:"message__top",children:[Object(_.jsx)("img",{className:"message__image",src:"https://g-social.herokuapp.com/images/user.png",alt:"Friends Image"}),Object(_.jsx)("p",{className:"message__text",children:s.text})]}),Object(_.jsx)("div",{className:"message__bottom",children:Object(se.a)(s.createdAt)})]})}s(150);function Pe(e){var t=e.userId,s=(e.setCurrentChat,e.setCurrent,e.setOnlineUsers,e.onlineUsers),a=Object(c.useState)([]),n=Object(i.a)(a,2),r=n[0],l=n[1],o=Object(c.useState)([]),d=Object(i.a)(o,2),j=d[0],h=d[1];Object(c.useEffect)((function(){(function(){var e=Object(p.a)(b.a.mark((function e(){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/users/friends/"+t);case 3:s=e.sent,l(s.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert("Failed to get friends");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){h(r.filter((function(e){return s.includes(e._id)})))}),[r,s]);return Object(_.jsx)("div",{className:"chat__online",children:null===j||void 0===j?void 0:j.map((function(e){return Object(_.jsxs)(u.b,{className:"chat__online-friend",to:"/profile/"+e.userAddress,children:[Object(_.jsxs)("div",{className:"chat__online-image-container",children:[Object(_.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)?null===e||void 0===e?void 0:e.profilePicture:"https://g-social.herokuapp.com/images/user.png",alt:"",className:"chat__online-image"}),Object(_.jsx)("div",{className:"chat__online-badge"})]}),Object(_.jsx)("div",{className:"chat__online-name",children:e.userName})]})}))})}s(151);var Ce=s(64);function Fe(e){var t=e.socket,s=e.onlineUsers,a=e.setOnlineUsers,n=Object(c.useState)([]),r=Object(i.a)(n,2),l=r[0],o=r[1],d=Object(c.useState)(null),u=Object(i.a)(d,2),j=u[0],h=u[1],m=Object(c.useState)(null),x=Object(i.a)(m,2),f=x[0],N=x[1],I=Object(c.useState)(null),S=Object(i.a)(I,2),P=S[0],C=S[1],F=Object(c.useState)(!1),U=Object(i.a)(F,2),E=U[0],T=U[1],L=Object(c.useState)(!1),R=Object(i.a)(L,2),A=R[0],W=R[1],Y=Object(c.useState)(""),D=Object(i.a)(Y,2),q=D[0],M=D[1],B=Object(c.useContext)(g).user,J=Object(c.useRef)();Object(c.useEffect)((function(){var e;t&&B&&(null===t||void 0===t||null===(e=t.current)||void 0===e||e.on("getMessage",(function(e){C({sender:e.senderId,text:e.text,createdAt:e.createdAt})})))}),[t,B]),Object(c.useEffect)((function(){var e;P&&(null===j||void 0===j||null===(e=j.members)||void 0===e?void 0:e.includes(P.sender))&&N((function(e){return[].concat(Object(v.a)(e),[P])}))}),[P,j]),Object(c.useEffect)((function(){(function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/conversations/"+B._id);case 3:t=e.sent,o(t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert("Could not get Conversations \ud83d\ude22");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[null===B||void 0===B?void 0:B._id]),Object(c.useEffect)((function(){j&&function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/messages/".concat(j._id));case 3:t=e.sent,N(t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert("Could not get Messages");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[null===j||void 0===j?void 0:j._id]),Object(c.useEffect)((function(){var e;null===J||void 0===J||null===(e=J.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[f||null]);var z=function(){var e=Object(p.a)(b.a.mark((function e(s){var c,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),c={sender:null===B||void 0===B?void 0:B._id,text:q,conversationId:null===j||void 0===j?void 0:j._id},a=null===j||void 0===j?void 0:j.members.find((function(e){return e!==(null===B||void 0===B?void 0:B._id)})),console.log({senderId:null===B||void 0===B?void 0:B._id,receiverId:a,text:q}),W(!0),t.current.emit("sendMessage",{senderId:null===B||void 0===B?void 0:B._id,receiverId:a,text:q}),e.prev=6,e.next=9,O.a.post("/api/messages",c);case 9:n=e.sent,t.current.emit(),W(!1),N([].concat(Object(v.a)(f),[n.data])),M(""),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0),W(!1),alert("Could not send message");case 21:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"messenger",children:[Object(_.jsx)("div",{className:E?"chat__menu conversation-active":"chat__menu",children:Object(_.jsxs)("div",{className:"chat__menu-wrapper",children:[Object(_.jsx)("input",{type:"text",placeholder:"Search for Friends",className:"chat__menu-input"}),null===l||void 0===l?void 0:l.map((function(e){return Object(_.jsx)("div",{onClick:function(){h(e)},children:Object(_.jsx)(Ie,{conversation:e,currentUser:B},e._id)})}))]})}),Object(_.jsxs)("div",{className:E?"sidebar__toggle":"sidebar__toggle-active sidebar__toggle",onClick:function(){T(!E)},style:{width:"max-content",height:"max-content",cursor:"pointer"},children:[E?Object(_.jsx)(w.a,{}):Object(_.jsx)(k.a,{})," ",E?"Show Conversations":"Hide Conversations"]}),Object(_.jsx)("div",{className:"chat__box",children:Object(_.jsx)("div",{className:"chat__box-wrapper",children:j?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"chat__box-top",children:null===f||void 0===f?void 0:f.map((function(e){var t=(null===e||void 0===e?void 0:e.sender)===B._id;return Object(_.jsx)("div",{ref:J,children:Object(_.jsx)(Se,{message:e,own:t},e._id)})}))}),Object(_.jsxs)("div",{className:"chat__box-bottom",children:[Object(_.jsx)("textarea",{className:"chat__message-input",placeholder:"Write Something.....",onChange:function(e){M(e.target.value)},value:q}),Object(_.jsx)("button",{className:"chat__submit-button",onClick:z,children:A?Object(_.jsx)(G.a,{}):"Send"})]})]}):Object(_.jsx)("span",{className:"chat__noConversation",children:"Open a Conversations to start Chatting"})})}),Object(_.jsx)("div",{className:"chat__online",children:Object(_.jsx)("div",{className:"chat__online-wrapper",children:Object(_.jsx)(Pe,{onlineUsers:s,setOnlineUsers:a,userId:B._id,setCurrentChat:h})})})]})]})}var Ue=function(){var e=Object(c.useContext)(g).user,t=Object(c.useState)(null),s=Object(i.a)(t,2),a=s[0],n=s[1],r=Object(c.useState)([]),l=Object(i.a)(r,2),o=l[0],j=l[1];return Object(c.useEffect)((function(){if(e){var t=Object(Ce.io)("https://nameless-chamber-90432.herokuapp.com/");n({current:t})}}),[e]),Object(c.useEffect)((function(){var t,s;e&&a&&(null===a||void 0===a||null===(t=a.current)||void 0===t||t.emit("addUser",null===e||void 0===e?void 0:e._id),null===a||void 0===a||null===(s=a.current)||void 0===s||s.on("getUsers",(function(t){j(e.followings.filter((function(e){return t.some((function(t){return t.userId===e}))})))})))}),[e,a]),Object(_.jsx)("div",{className:"app",children:Object(_.jsx)(u.a,{children:Object(_.jsxs)(d.d,{children:[Object(_.jsx)(d.b,{path:"/register",exact:!0,children:e?Object(_.jsx)(d.a,{to:"/"}):Object(_.jsx)(he,{})}),Object(_.jsx)(d.b,{path:"/login",exact:!0,children:e?Object(_.jsx)(d.a,{to:"/"}):Object(_.jsx)(be,{})}),Object(_.jsx)(d.b,{path:"/profile/:userName",exact:!0,children:Object(_.jsx)(ue,{})}),Object(_.jsx)(d.b,{path:"/profile/:userId/edit",exact:!0,children:e?Object(_.jsx)(ke,{}):Object(_.jsx)(d.a,{to:"/"})}),Object(_.jsx)(d.b,{path:"/post/:postId",exact:!0,children:Object(_.jsx)(ve,{onlineUsers:o})}),Object(_.jsx)(d.b,{path:"/search/:query",exact:!0,children:Object(_.jsx)(xe,{onlineUsers:o})}),Object(_.jsx)(d.b,{path:"/popular",exact:!0,children:Object(_.jsx)(Ne,{onlineUsers:o})}),Object(_.jsx)(d.b,{path:"/stared",exact:!0,children:e?Object(_.jsx)(_e,{onlineUsers:o}):Object(_.jsx)(d.a,{to:"/"})}),Object(_.jsx)(d.b,{path:"/videos",exact:!0,children:Object(_.jsx)(fe,{onlineUsers:o})}),Object(_.jsx)(d.b,{path:"/images",exact:!0,children:Object(_.jsx)(ge,{onlineUsers:o})}),Object(_.jsx)(d.b,{path:"/friends/:userId",children:Object(_.jsx)(we,{onlineUsers:o})}),Object(_.jsx)(d.b,{path:"/followers/:userId",children:Object(_.jsx)(ye,{onlineUsers:o})}),Object(_.jsx)(d.b,{path:"/conversation",children:e?Object(_.jsx)(Fe,{socket:a,onlineUsers:o,setOnlineUsers:j}):Object(_.jsx)(he,{})}),Object(_.jsx)(d.b,{path:"/",children:e?Object(_.jsx)(de,{onlineUsers:o}):Object(_.jsx)(he,{})})]})})})};r.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(N,{children:Object(_.jsx)(Ue,{})})}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.973a0041.chunk.js.map